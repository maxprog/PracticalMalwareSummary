# 2 Malware analysis in Virtual Machines

A safe environment allows to investigate potentially malicious executable without exposing other machines to unexpected risks. 

An option is to use physical machines on air-gapped networks (not connected to the internet):
+ Pros: real environment
+ Cons: no internet connection (many malware depends on internet for updates), malware may be difficult to remove (backup should be used)

## Virtual Machines

Guest OS is installed in the host OS and kept isolated; thus if the guest OS runs malware, it cannot harm the host OS (assuming that the isolation works as expected ðŸ˜ˆ).

### Creating a malware analysis machine

**NOTE:**I am skipping some of this part for two reasons:
- It's specific to VMware
- It's probably outdated

Here are major inputs that are probably still valid, in case you want to create a malware analysis virtual machine:
- correctly setup the networking options based on your needs (for more info, look for *host-only networking*, *bridged network adapters* and *NAT mode*).
- allocate enough space in the virtual drive (the book suggests to begin with 20GB).
-  make use of *snapshots* to restore a virtual machine's state.
- be aware that some malware can detect if it is executed in a virtual machine and change its behavior accordingly.

**Personal addition:** if you want to create a malware analysis environment, check [FLARE VM](https://www.fireeye.com/blog/threat-research/2018/11/flare-vm-update.html).


